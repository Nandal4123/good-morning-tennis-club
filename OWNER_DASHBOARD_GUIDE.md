# 🔐 관리자 대시보드 접속 가이드

테니스 클럽 관리자 대시보드에 접속하는 방법을 단계별로 안내합니다.

---

## 📍 접속 주소

### 기본 주소 (굿모닝 클럽)
```
https://good-morning-tennis-club.vercel.app/?owner=1
```

### 다른 클럽 관리 시
```
https://good-morning-tennis-club.vercel.app/?club=<클럽이름>&owner=1
```

**예시:**
- Ace Club 관리: `https://good-morning-tennis-club.vercel.app/?club=ace-club&owner=1`
- 굿모닝 클럽 관리: `https://good-morning-tennis-club.vercel.app/?owner=1` (또는 `?club=default&owner=1`)

---

## 🔑 접속 방법 (3단계)

### 1단계: Owner 로그인 버튼 표시

**중요:** URL에 `?owner=1` 파라미터를 추가해야 Owner 로그인 버튼이 나타납니다.

1. 브라우저 주소창에 다음 주소 입력:
   ```
   https://good-morning-tennis-club.vercel.app/?owner=1
   ```

2. 로그인 화면에서 **"Owner 로그인"** 버튼이 나타나는지 확인
   - 버튼이 보이지 않으면 → URL에 `?owner=1`이 정확히 입력되었는지 확인
   - 주소창을 다시 확인: `?owner=1` 또는 `&owner=1`이 포함되어야 함

### 2단계: Owner 비밀번호 입력

1. **"Owner 로그인"** 버튼 클릭
2. 비밀번호 입력창이 나타남
3. **Render 환경변수에 설정된 `OWNER_PASSWORD` 값** 입력
   - 이 비밀번호는 Render 대시보드의 Environment Variables에서 확인/변경 가능
   - 일반 사용자 비밀번호와는 **완전히 별개**입니다

**비밀번호 확인 방법:**
- Render 대시보드 → 해당 서비스 → Environment 탭
- `OWNER_PASSWORD` 변수 값 확인

**비밀번호 변경 방법:**
- Render 대시보드 → Environment Variables → `OWNER_PASSWORD` 수정
- 수정 후 **Manual Deploy** 실행 (자동 재배포 안 됨)

### 3단계: 대시보드 접속

1. 비밀번호 입력 후 로그인 버튼 클릭
2. 로그인 성공 시 자동으로 `/owner` 경로로 이동
3. 관리자 대시보드 화면이 표시됨

---

## 🎯 관리자 대시보드 기능

### 1. 클럽 목록 관리
- 모든 클럽 목록 조회
- 클럽 검색
- 클럽별 요약 정보 확인

### 2. 클럽 요약 정보
- 회원 수
- 오늘 접속자 수 (고유 방문자)
- 오늘 세션 수
- 오늘 경기 수

### 3. 클럽 이동
- 특정 클럽 선택 후 "이동" 또는 "새 탭" 버튼으로 해당 클럽 화면으로 이동
- 클럽별 데이터 확인 가능

### 4. 클럽 생성
- 새 클럽 생성
- 클럽 이름 및 서브도메인 설정

### 5. 운영 설정
- **가입 코드**: 회원가입 시 필요한 코드 설정
- **관리자 비밀번호**: 각 클럽의 관리자 비밀번호 설정
- 저장 시 해당 클럽의 회원가입/관리자 로그인에 적용됨

### 6. 링크 공유 설정 (OG 이미지)
- **공유 제목**: 카카오톡 등에서 링크 공유 시 표시될 제목
- **공유 설명**: 링크 공유 시 표시될 설명
- **공유 이미지 URL**: 링크 공유 시 표시될 이미지 경로
  - 권장: `/og/<클럽서브도메인>.svg` 형식
  - 예: `/og/ace-club.svg`

---

## ⚠️ 주의사항

### 1. URL 파라미터 필수
- `?owner=1` 파라미터 없이는 Owner 로그인 버튼이 나타나지 않습니다
- 보안을 위해 일반 사용자에게는 Owner 기능이 숨겨져 있습니다

### 2. Owner 비밀번호 보안
- Owner 비밀번호는 Render 환경변수에만 저장
- 코드나 GitHub에 절대 저장하지 마세요
- 정기적으로 변경하는 것을 권장합니다

### 3. 멀티테넌트 모드
- 멀티테넌트 모드가 활성화되어 있으면 여러 클럽을 관리할 수 있습니다
- 각 클럽의 데이터는 완전히 분리되어 있습니다
- 클럽별로 가입 코드와 관리자 비밀번호를 별도로 설정할 수 있습니다

### 4. 토큰 만료
- Owner 로그인 토큰은 12시간 후 만료됩니다
- 만료 시 다시 로그인해야 합니다

---

## 🔧 문제 해결

### 문제 1: Owner 로그인 버튼이 보이지 않음

**원인:**
- URL에 `?owner=1` 파라미터가 없음

**해결:**
1. 주소창 확인: `?owner=1` 또는 `&owner=1` 포함 여부
2. 올바른 주소로 다시 접속:
   ```
   https://good-morning-tennis-club.vercel.app/?owner=1
   ```

### 문제 2: 비밀번호가 맞지 않음

**원인:**
- Render 환경변수 `OWNER_PASSWORD`와 입력한 값이 다름
- 환경변수에 공백이 포함됨
- 환경변수 변경 후 재배포 안 함

**해결:**
1. Render 대시보드에서 `OWNER_PASSWORD` 값 확인
2. 앞뒤 공백 제거 후 정확히 입력
3. 환경변수 변경 후 **Manual Deploy** 실행
4. 배포 완료 후 다시 시도

### 문제 3: 로그인 후 대시보드가 안 보임

**원인:**
- 토큰 만료
- 브라우저 캐시 문제
- 네트워크 오류

**해결:**
1. 브라우저 새로고침 (F5 또는 Cmd+R)
2. 다시 로그인 시도
3. 브라우저 개발자 도구(F12) → Console 탭에서 에러 확인

### 문제 4: 클럽 목록이 안 보임

**원인:**
- 서버 연결 문제
- 멀티테넌트 모드 비활성화

**해결:**
1. 브라우저 개발자 도구(F12) → Network 탭에서 API 요청 확인
2. Render 서버 상태 확인
3. Render 환경변수 `MULTI_TENANT_MODE=true` 확인

---

## 📝 빠른 참조

### 접속 URL 템플릿

```
기본 (굿모닝): https://good-morning-tennis-club.vercel.app/?owner=1
다른 클럽: https://good-morning-tennis-club.vercel.app/?club=<클럽이름>&owner=1
```

### Render 환경변수 확인 위치

1. Render 대시보드 로그인
2. 서비스 선택 (예: `good-morning-tennis-club-v2`)
3. **Environment** 탭 클릭
4. `OWNER_PASSWORD` 값 확인

### Owner 비밀번호 변경 절차

1. Render 대시보드 → Environment Variables
2. `OWNER_PASSWORD` 값 수정
3. **Save Changes** 클릭
4. **Manual Deploy** 버튼 클릭
5. 배포 완료 대기 (약 2-3분)
6. 새 비밀번호로 로그인 테스트

---

## 🎓 추가 정보

### Owner vs 일반 관리자

- **Owner**: 전체 시스템 관리자 (모든 클럽 관리 가능)
- **일반 관리자**: 각 클럽의 관리자 (해당 클럽만 관리)

### Owner 권한

- 모든 클럽 목록 조회
- 모든 클럽 데이터 접근
- 클럽 생성/삭제
- 클럽별 운영 설정 변경

### 일반 관리자 권한

- 해당 클럽의 회원 관리
- 해당 클럽의 세션/경기 관리
- 해당 클럽의 통계 확인

---

## ✅ 체크리스트

접속 전 확인사항:

- [ ] URL에 `?owner=1` 파라미터 포함
- [ ] Render 환경변수 `OWNER_PASSWORD` 값 확인
- [ ] Render 서버가 정상 작동 중인지 확인
- [ ] 브라우저가 최신 버전인지 확인

접속 후 확인사항:

- [ ] Owner 로그인 버튼이 보이는가?
- [ ] 비밀번호 입력 후 로그인이 되는가?
- [ ] 대시보드 화면이 정상적으로 표시되는가?
- [ ] 클럽 목록이 보이는가?

---

**문제가 계속되면:** Render 서버 로그를 확인하거나, 브라우저 개발자 도구(F12)의 Console/Network 탭에서 에러 메시지를 확인하세요.




