# λ©€ν‹°ν…λ„νΈ κΈ°λ¥ μ κ²€ λ³΄κ³ μ„

## β… μ κ²€ ν•­λ©

### 1. λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
- β… Club λ¨λΈ μ΅΄μ¬
- β… User, Session, Match λ¨λΈμ— clubId ν•„λ“ μ΅΄μ¬ (μµμ…”λ„)
- β… κ΄€κ³„(relation) μ„¤μ • μ™„λ£

### 2. μ„λ²„ μΈ΅ ν΄λ½ ν•΄μ„
- β… `clubResolver.js` λ―Έλ“¤μ›¨μ–΄ κµ¬ν„
- β… μ„λΈλ„λ©”μΈ, ν—¤λ”, μΏΌλ¦¬ νλΌλ―Έν„° μ§€μ›
- β… νΈμ¤ν… λ„λ©”μΈ λ¬΄μ‹ λ΅μ§
- β… κΈ°λ³Έ ν΄λ½ fallback μ²λ¦¬

### 3. ν΄λΌμ΄μ–ΈνΈ μΈ΅ ν΄λ½ μ‹λ³„
- β… `clubContext.js` κµ¬ν„
- β… URL μΏΌλ¦¬ νλΌλ―Έν„° μ°μ„ μμ„
- β… μ„λΈλ„λ©”μΈ μ¶”μ¶
- β… localStorage λ°±μ—…
- β… `?club=` νλΌλ―Έν„°κ°€ μμΌλ©΄ λ©€ν‹°ν…λ„νΈ λ¨λ“ κ°•μ  ν™μ„±ν™”

### 4. API νΈμ¶ μ‹ ν΄λ½ μ •λ³΄ μ „λ‹¬
- β… `fetchApi`μ—μ„ ν΄λ½ μΏΌλ¦¬ νλΌλ―Έν„° μ¶”κ°€
- β… `X-Club-Subdomain` ν—¤λ” μ¶”κ°€
- β… λ΅κ·Έ μ¶λ ¥μΌλ΅ λ””λ²„κΉ… κ°€λ¥

### 5. μ„λ²„ λΌμ°ν…
- β… `/api/clubs` μ—”λ“ν¬μΈνΈ ν΄λ½ ν•΄μ„ μ „μ— λ“±λ΅ (Owner λ€μ‹λ³΄λ“μ©)
- β… `/api/owner` μ—”λ“ν¬μΈνΈ ν΄λ½ ν•΄μ„ μ „μ— λ“±λ΅
- β… λ‚λ¨Έμ§€ APIλ” ν΄λ½ ν•΄μ„ λ―Έλ“¤μ›¨μ–΄ μ μ©

### 6. μ»¨νΈλ΅¤λ¬ ν•„ν„°λ§
- β… `buildClubWhere` ν•¨μ μ‚¬μ©
- β οΈ **λ¬Έμ  λ°κ²¬**: κΈ°λ³Έ ν΄λ½(default)μΌ λ• `clubId=NULL` λ κ±°μ‹ λ°μ΄ν„° λ―Έν¬ν•¨

---

## π”§ λ°κ²¬λ λ¬Έμ  λ° μμ •

### λ¬Έμ  1: κΈ°λ³Έ ν΄λ½μ—μ„ λ κ±°μ‹ λ°μ΄ν„° λ„λ½

**ν„μ¬ μƒνƒ:**
- `buildClubWhere`κ°€ `clubId`λ§ ν•„ν„°λ§
- κΈ°λ³Έ ν΄λ½(default)μΌ λ• `clubId=NULL` λ κ±°μ‹ λ°μ΄ν„°κ°€ μ μ™Έλ¨

**μμ • λ‚΄μ©:**
- κΈ°λ³Έ ν΄λ½μΌ λ• `OR` μ΅°κ±΄μΌλ΅ `clubId=defaultClub.id` λλ” `clubId=NULL` λ‘ λ‹¤ ν¬ν•¨
- `getUserById`μ—μ„λ„ λ™μΌν• λ΅μ§ μ μ©

---

## π“‹ ν…μ¤νΈ μ²΄ν¬λ¦¬μ¤νΈ

### κΈ°λ³Έ κΈ°λ¥ ν…μ¤νΈ
- [ ] Good Morning Club μ ‘μ† μ‹ λ°μ΄ν„° ν‘μ‹ ν™•μΈ
- [ ] Ace Club μ ‘μ† μ‹ λ°μ΄ν„° ν‘μ‹ ν™•μΈ
- [ ] κ° ν΄λ½μ λ°μ΄ν„°κ°€ λ…λ¦½μ μΌλ΅ ν‘μ‹λλ”μ§€ ν™•μΈ

### Owner λ€μ‹λ³΄λ“ ν…μ¤νΈ
- [ ] λ¨λ“  ν΄λ½ λ©λ΅ ν‘μ‹ ν™•μΈ
- [ ] ν΄λ½ μ„ νƒ μ‹ μ”μ•½ μ •λ³΄ ν‘μ‹ ν™•μΈ
- [ ] ν΄λ½ μ΄λ™ κΈ°λ¥ μ‘λ™ ν™•μΈ

### λ°μ΄ν„° λ¶„λ¦¬ ν…μ¤νΈ
- [ ] Good Morning Club νμ›μ΄ Ace Club λ°μ΄ν„°μ— μ ‘κ·Ό λ¶κ°€ ν™•μΈ
- [ ] Ace Club νμ›μ΄ Good Morning Club λ°μ΄ν„°μ— μ ‘κ·Ό λ¶κ°€ ν™•μΈ
- [ ] κ° ν΄λ½μ μ„Έμ…, κ²½κΈ°, μ¶μ„ λ°μ΄ν„°κ°€ λ…λ¦½μ μΈμ§€ ν™•μΈ

### λ κ±°μ‹ λ°μ΄ν„° νΈν™μ„± ν…μ¤νΈ
- [ ] `clubId=NULL` λ°μ΄ν„°κ°€ Good Morning Clubμ—μ„ ν‘μ‹λλ”μ§€ ν™•μΈ
- [ ] `clubId=NULL` λ°μ΄ν„°κ°€ Ace Clubμ—μ„ ν‘μ‹λμ§€ μ•λ”μ§€ ν™•μΈ

---

## π€ λ‹¤μ λ‹¨κ³„

1. **Render λ°°ν¬**: μμ • μ‚¬ν•­ λ°°ν¬
2. **κΈ°λ¥ ν…μ¤νΈ**: μ„ μ²΄ν¬λ¦¬μ¤νΈ ν•­λ© ν…μ¤νΈ
3. **λ°μ΄ν„° ν™•μΈ**: Render Shellμ—μ„ ν΄λ½ λ©λ΅ ν™•μΈ
4. **λ κ±°μ‹ λ°μ΄ν„° λ§μ΄κ·Έλ μ΄μ…**: ν•„μ”μ‹ `backfill-default-clubid.js` μ‹¤ν–‰




